/*
  Despite the manifest being passed in, finalizeManifest fetches a copy
  of it from the cache under certain conditions.
  This *might* be reason to implement a feature to set data to be
  retrieved for a given spec... probably not though.

  Properties expected on resolved value:
    _resolved, _integrity, _ref (which must have sha and allRefs props)
    ===> there's a check for _resolved in processNpmRegistryItem, like we already
      dealt with in dl_item-agents_test!
    ===> we don't need to deal with _ref here, because it's handled in download.js!
  Optional, to be provided for specific test cases:
    _shrinkwrap (may or may not have dependencies prop),
    bundleDependencies, devDependencies, optionalDependencies, peerDependencies?
*/
module.exports = function (pkg, spec, opts) {
  if (!pkg._integrity && pkg._integrity !== false)
    pkg._integrity = 'fakeIntegrityValueSetInMockPacoteFinalizeManifest'
  return Promise.resolve(pkg)
}
